\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{citrine}[custom package for compsci \& math documents]

\RequirePackage{algorithm}
\RequirePackage{algpseudocode}
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{amsthm}
\RequirePackage{caption}
\RequirePackage{centernot}
\RequirePackage{enumitem}
\RequirePackage[linguistics]{forest}
\RequirePackage{geometry}
\RequirePackage[hidelinks]{hyperref}
\RequirePackage{listings}
\RequirePackage{mathtools}
\RequirePackage{multicol}
\RequirePackage{multirow}
\RequirePackage{parskip}
\RequirePackage{tabularx}
\RequirePackage{titlesec}

% Must be loaded after hyperref.
\RequirePackage[xspace]{ellipsis}

%%% Configure ToC. %%%

% TOC Depth
\setcounter{tocdepth}{4}
% Make ToC clickable.
\hypersetup{linktoc=all}

%%% Configure paragraphs. %%%

% Turn paragraphs into subsubsubsections.
\titleformat{\paragraph}{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
\setcounter{secnumdepth}{4}
% Don't indent new paragraphs. Instead, let the parskip package add spacing
% between paragraphs.
\setlength{\parindent}{0pt}

%%% Change misc text settings. %%%

% Use 1.1, 1.1.1, etc. for sublists.
\setlist[enumerate]{label*=\arabic*.}
% Shorten \dots.
\renewcommand{\ellipsisgap}{0.1em}

%%% Configure algorithmicx. %%%

% Remove "if" "for" "while" from "end" statements.
\algtext{EndIf}{\algorithmicend}
\algtext{EndFor}{\algorithmicend}
\algtext{EndWhile}{\algorithmicend}
\algtext{EndProcedure}{\algorithmicend}
% Inline if
\algnewcommand{\IIf}[1]{\State\algorithmicif\ #1\ \algorithmicthen}
\algnewcommand{\EndIIf}{\unskip}
\algnewcommand{\To}{\textbf{ to }}
% Remove caption text and number from algorithms.
\captionsetup[algorithm]{labelformat=empty}

%%% Configure forest trees. %%%

\forestset{
  default preamble={
    for tree={
      inner sep=1pt
    }
  }
}

%%% Theorems, examples, solutions, etc. %%%

\theoremstyle{definition}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem*{xclaim}{Claim}
\newtheorem*{remark}{Remark}
\newtheorem*{example}{Example}

\newenvironment{closedtheorem}
  {\pushQED{\qed}\theorem}
  {\popQED\endtheorem}

\newenvironment{closedcorollary}
  {\pushQED{\qed}\corollary}
  {\popQED\endcorollary}

\newenvironment{closedlemma}
  {\pushQED{\qed}\lemma}
  {\popQED\endlemma}

\newenvironment{closedclaim}
  {\pushQED{\qed}\claim}
  {\popQED\endclaim}

\newenvironment{closedremark}
  {\pushQED{\qed}\remark}
  {\popQED\endremark}

\newenvironment{closedexample}
  {\pushQED{\qed}\renewcommand{\qedsymbol}{$\triangle$}\example}
  {\popQED\endexample}

\newenvironment{solution}
  {\renewcommand\qedsymbol{$\triangle$}\begin{proof}[Solution]}
  {\end{proof}}

\newenvironment{claim}
  {\pushQED{\qed}\renewcommand{\qedsymbol}{$\triangle$}\xclaim}
  {\popQED\endxclaim}

\newenvironment{note}{\begin{itshape}Note:}{\end{itshape}}

%%% Definitions %%%

% Absolute value
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
% Cardinality
\newcommand{\card}{\abs}
% Divides
\newcommand{\divides}{\mid}
% Does not divide
\newcommand{\notdivides}{\centernot\mid}
% Binary integer division operator
\newcommand{\bdiv}{\text{ div }}
% Least Common Multiple
\newcommand{\lcm}{\text{lcm}}
% Inverse
\newcommand{\inv}{\overline}
% Complement
\newcommand{\comp}{\overline}
% Ceil
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
% Floor
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
% Permutation
\newcommand*{\perm}[2]{{}^{#1}\!P_{#2}}
% Conditional probability given that
\newcommand{\given}{\mid}
% Horizontal bar to end of line.
% e.g. \finline[0.2em]{1pt}
\newcommand{\finline}[2][0em]{\leaders\hbox{\rule[#1]{1pt}{#2}}\hfill}
% Circle something.
\newcommand*\circled[1]{%
  \begin{tikzpicture}[baseline=(C.base)]
    \node[draw,circle,inner sep=1pt](C) {#1};
  \end{tikzpicture}}
% Alias for problem/exercise.
\newcommand{\prob}[1]{\subsubsection*{Problem \#{#1}}}
\newcommand{\exer}[1]{\subsubsection*{Exercise \#{#1}}}

\endinput
